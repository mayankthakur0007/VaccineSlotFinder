{"ast":null,"code":"import _slicedToArray from\"/Users/mayankpratapsingh/Documents/GitHub/slotfinderIndia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Strings from\"./Strings\";import Dropdown from\"react-dropdown\";import\"react-dropdown/style.css\";import axios from\"axios\";import{useState}from\"react\";import\"./Styles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchForm=function SearchForm(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),districtsData=_useState2[0],districtDataChanged=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),districts=_useState4[0],districtchanged=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),stateData=_useState6[0],stateDataChanged=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),states=_useState8[0],statechanged=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),selectedDistrict=_useState10[0],selectedDistrictchanged=_useState10[1];var onStateChange=function onStateChange(e){var id=stateData.filter(function(state){if(state.state_name===e.value){return state;}})[0].state_id;axios.get(\"https://cdn-api.co-vin.in/api/v2/admin/location/districts/\".concat(id)).then(function(response){districtDataChanged(response.data.districts);districtchanged(response.data.districts.map(function(district){return district.district_name;}));});};var onDistrictChange=function onDistrictChange(e){var id=districtsData.filter(function(district){if(district.district_name===e.value){return district;}})[0].district_id;selectedDistrictchanged(id);};var onSearch=function onSearch(e){e.preventDefault();var currentDate=new Date();var dd=currentDate.getDate();var mm=currentDate.getMonth()+1;if(dd<10){dd=\"0\"+dd;}if(mm<10){mm=\"0\"+mm;}currentDate=\"\".concat(dd,\"-\").concat(mm,\"-\").concat(currentDate.getFullYear());if(selectedDistrict!==\"\"){axios.get(\"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=\".concat(selectedDistrict,\"&date=\").concat(currentDate)).then(function(response){props.onResult(response.data.centers);});}else{console.log(\"validation error\");}};var onFocuses=function onFocuses(){axios.get(\"https://cdn-api.co-vin.in/api/v2/admin/location/states\").then(function(response){stateDataChanged(response.data.states);statechanged(response.data.states.map(function(state){return state.state_name;}));});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{id:\"districtselector\",onSubmit:onSearch,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mar_small\",children:/*#__PURE__*/_jsx(Dropdown,{options:states,onChange:onStateChange,onFocus:onFocuses,placeholder:\"Select State\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mar_small\",children:/*#__PURE__*/_jsx(Dropdown,{options:districts,onChange:onDistrictChange,placeholder:\"Select District\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mar_small\",children:\"Search\"})]})});};export default SearchForm;","map":{"version":3,"sources":["/Users/mayankpratapsingh/Documents/GitHub/slotfinderIndia/src/SearchForm.jsx"],"names":["Strings","Dropdown","axios","useState","SearchForm","props","districtsData","districtDataChanged","districts","districtchanged","stateData","stateDataChanged","states","statechanged","selectedDistrict","selectedDistrictchanged","onStateChange","e","id","filter","state","state_name","value","state_id","get","then","response","data","map","district","district_name","onDistrictChange","district_id","onSearch","preventDefault","currentDate","Date","dd","getDate","mm","getMonth","getFullYear","onResult","centers","console","log","onFocuses"],"mappings":"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","sourcesContent":["import Strings from \"./Strings\";\nimport Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport \"./Styles.css\";\n\nconst SearchForm = (props) => {\n  let [districtsData,districtDataChanged] = useState([]);\n  let [districts,districtchanged] = useState([]);\n  let [stateData,stateDataChanged] = useState([]);\n  let [states,statechanged] = useState([]);\n  let [selectedDistrict,selectedDistrictchanged] = useState('');\n\n  const onStateChange = (e) => {\n    let id = stateData.filter((state)=>{\n      if(state.state_name === e.value){\n        return state;\n      }\n    })[0].state_id;\n    axios\n      .get(`https://cdn-api.co-vin.in/api/v2/admin/location/districts/${id}`)\n      .then((response) => {\n        districtDataChanged(response.data.districts);\n        districtchanged(\n          response.data.districts.map((district) => {\n            return district.district_name;\n          })\n        );\n      })\n  };\n\n  const onDistrictChange = (e) => {\n    let id = districtsData.filter((district) => {\n      if (district.district_name === e.value) {\n        return district;\n      }\n    })[0].district_id;\n    selectedDistrictchanged(id);\n  };\n\n  const onSearch = (e) => {\n    e.preventDefault();\n    let currentDate = new Date();\n    let dd = currentDate.getDate();\n    let mm = currentDate.getMonth()+1;\n    if (dd < 10) {\n      dd = \"0\" + dd;\n    }\n\n    if (mm < 10) {\n      mm = \"0\" + mm;\n    }\n    currentDate = `${dd}-${mm}-${currentDate.getFullYear()}`;\n    if (selectedDistrict !== \"\") {\n      axios\n        .get(\n          `https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=${selectedDistrict}&date=${currentDate}`\n        )\n        .then((response) => {\n          props.onResult(response.data.centers)\n        });\n    } else {\n      console.log(\"validation error\");\n    }\n  };\n\n  const onFocuses = () => {\n    axios\n      .get(\"https://cdn-api.co-vin.in/api/v2/admin/location/states\")\n      .then((response) => {\n        stateDataChanged(response.data.states);\n        statechanged(\n          response.data.states.map((state) => {\n            return state.state_name;\n          })\n        );\n      })\n  };\n\n  return (\n    <div>\n      <form id=\"districtselector\" onSubmit={onSearch}>\n        <div className=\"mar_small\">\n      <Dropdown\n        options={states}\n        onChange={onStateChange}\n        onFocus={onFocuses}\n        placeholder=\"Select State\"\n      />\n      </div>\n      <div className=\"mar_small\">\n      <Dropdown\n         options={districts}\n        onChange={onDistrictChange}\n        placeholder=\"Select District\"\n      />\n      </div>\n      <button type=\"submit\" className=\"mar_small\">Search</button>\n      </form>\n    </div>\n  );\n};\n\nexport default SearchForm;\n"]},"metadata":{},"sourceType":"module"}